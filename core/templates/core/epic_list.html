{% extends "base.html" %}
{% load static %}

{% block title %}Épicas{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/epic_list.css' %}">
{% endblock %}

{% block content %}
<div class="neu-page neu-epics">

  <div class="neu-page-head">
    <div>
      <h2 class="neu-title">Épicas</h2>
      <p class="neu-subtitle">Listado y control de épicas por proyecto.</p>
    </div>

    <div class="neu-actions">
      <a href="{% url 'epic_create' %}" class="btn btn-primary neu-btn">+ Nueva Épica</a>
    </div>
  </div>

  <div class="card neu-card p-3">
    <div class="table-responsive">
      <table class="table neu-table align-middle">
        <thead>
          <tr>
            <th style="width:90px;">ID</th>
            <th>Proyecto</th>
            <th>Nombre</th>
            <th class="neu-col-desc">Descripción</th>
            <th class="text-end">Acciones</th>
          </tr>
        </thead>

        <tbody>
          {% for e in epics %}
            <tr>
              <td class="neu-muted">#{{ e.id }}</td>
              <td class="neu-muted">{% if e.project %}{{ e.project.name }}{% else %}—{% endif %}</td>
              <td class="neu-td-strong">{{ e.name }}</td>
              <td class="neu-muted neu-col-desc">
                {% if e.description %}{{ e.description|truncatechars:140 }}{% else %}—{% endif %}
              </td>
              <td class="text-end">
                <a href="{% url 'epic_update' e.pk %}" class="btn btn-sm btn-outline-primary">Editar</a>

                <form method="post" action="{% url 'epic_delete' e.pk %}" class="d-inline">
                  {% csrf_token %}
                  <button type="submit"
                          class="btn btn-sm btn-outline-danger"
                          onclick="return confirm('¿Eliminar esta épica? Esta acción no se puede deshacer.');">
                    Eliminar
                  </button>
                </form>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5" class="text-center neu-muted py-4">No hay épicas creadas.</td>
            </tr>
          {% endfor %}
        </tbody>

      </table>
    </div>
  </div>

</div>
{% endblock %}
