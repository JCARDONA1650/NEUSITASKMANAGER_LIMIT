{% extends "base.html" %}
{% load static %}

{% block title %}Sprints{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/sprint_list.css' %}">
{% endblock %}

{% block content %}
<div class="neu-page neu-sprints">

  <div class="neu-page-head">
    <div>
      <h2 class="neu-title">Sprints</h2>
      <p class="neu-subtitle">Listado y control de sprints por proyecto.</p>
    </div>

    <div class="neu-actions">
      <a href="{% url 'sprint_create' %}" class="btn btn-primary neu-btn">+ Nuevo Sprint</a>
    </div>
  </div>

  <div class="card neu-card p-3">
    <div class="table-responsive">
      <table class="table neu-table align-middle">
        <thead>
          <tr>
            <th style="width:90px;">ID</th>
            <th>Proyecto</th>
            <th>Nombre</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th class="text-end">Acciones</th>
          </tr>
        </thead>

        <tbody>
          {% for s in sprints %}
            <tr>
              <td class="neu-muted">#{{ s.id }}</td>
              <td class="neu-muted">{% if s.project %}{{ s.project.name }}{% else %}—{% endif %}</td>
              <td class="neu-td-strong">{{ s.name }}</td>
              <td class="neu-muted">{% if s.start_date %}{{ s.start_date|date:"Y-m-d" }}{% else %}—{% endif %}</td>
              <td class="neu-muted">{% if s.end_date %}{{ s.end_date|date:"Y-m-d" }}{% else %}—{% endif %}</td>
              <td class="text-end">
                <a href="{% url 'sprint_update' s.pk %}" class="btn btn-sm btn-outline-primary">Editar</a>

                <form method="post" action="{% url 'sprint_delete' s.pk %}" class="d-inline">
                  {% csrf_token %}
                  <button type="submit"
                          class="btn btn-sm btn-outline-danger"
                          onclick="return confirm('¿Eliminar este sprint? Esta acción no se puede deshacer.');">
                    Eliminar
                  </button>
                </form>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="6" class="text-center neu-muted py-4">No hay sprints creados.</td>
            </tr>
          {% endfor %}
        </tbody>

      </table>
    </div>
  </div>

</div>
{% endblock %}
